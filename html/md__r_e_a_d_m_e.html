<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Python Robotics Simulator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Python Robotics Simulator </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a simple, portable robot simulator developed by <a href="https://studentrobotics.org">Student Robotics</a>. Some of the arenas and the exercises have been modified for the Research Track I course</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Installing and running</h1>
<p>The simulator requires a Python 2.7 installation, the <a href="http://pygame.org/">pygame</a> library, <a href="https://pypi.python.org/pypi/pypybox2d/2.1-r331">PyPyBox2D</a>, and <a href="https://pypi.python.org/pypi/PyYAML/">PyYAML</a>.</p>
<p>Pygame, unfortunately, can be tricky (though <a href="http://askubuntu.com/q/312767">not impossible</a>) to install in virtual environments. If you are using <code>pip</code>, you might try <code>pip install hg+https://bitbucket.org/pygame/pygame</code>, or you could use your operating system's package manager. Windows users could use <a href="http://portablepython.com/">Portable Python</a>. PyPyBox2D and PyYAML are more forgiving, and should install just fine using <code>pip</code> or <code>easy_install</code>.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Troubleshooting</h1>
<p>When running <code>python <a class="el" href="run_8py.html">run.py</a> &lt;file&gt;</code>, you may be presented with an error: &lsquo;ImportError: No module named 'robot&rsquo;`. This may be due to a conflict between sr.tools and sr.robot. To resolve, symlink simulator/sr/robot to the location of sr.tools.</p>
<p>On Ubuntu, this can be accomplished by:</p><ul>
<li>Find the location of srtools: <code>pip show sr.tools</code></li>
<li>Get the location. In my case this was <code>/usr/local/lib/python2.7/dist-packages</code></li>
<li>Create symlink: <code>ln -s path/to/simulator/sr/robot /usr/local/lib/python2.7/dist-packages/sr/</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
## Exercise</h1>
<p>To run one or more scripts in the simulator, use <code><a class="el" href="run_8py.html">run.py</a></code>, passing it the file names.</p>
<p>I am proposing you three exercises, with an increasing level of difficulty. The instruction for the three exercises can be found inside the .py files (exercise1.py, exercise2.py, exercise3.py).</p>
<p>When done, you can run the program with:</p>
<div class="fragment"><div class="line">$ python run.py exercise1.py</div>
</div><!-- fragment --><p>You have also the solutions of the exercises (folder solutions)</p>
<div class="fragment"><div class="line">$ python run.py solutions/exercise1_solution.py</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md4"></a>
Robot API</h1>
<p>The API for controlling a simulated robot is designed to be as similar as possible to the <a href="https://studentrobotics.org/docs/programming/sr/">SR API</a>.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Motors</h2>
<p>The simulated robot has two motors configured for skid steering, connected to a two-output <a href="https://studentrobotics.org/docs/kit/motor_board">Motor Board</a>. The left motor is connected to output <code>0</code> and the right motor to output <code>1</code>.</p>
<p>The Motor Board API is identical to <a href="https://studentrobotics.org/docs/programming/sr/motors/">that of the SR API</a>, except that motor boards cannot be addressed by serial number. So, to turn on the spot at one quarter of full power, one might write the following:</p>
<div class="fragment"><div class="line">R.motors[0].m0.power = 25</div>
<div class="line">R.motors[0].m1.power = -25</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
The Grabber</h2>
<p>The robot is equipped with a grabber, capable of picking up a token which is in front of the robot and within 0.4 metres of the robot's centre. To pick up a token, call the <code>R.grab</code> method:</p>
<div class="fragment"><div class="line">success = R.grab()</div>
</div><!-- fragment --><p>The <code>R.grab</code> function returns <code>True</code> if a token was successfully picked up, or <code>False</code> otherwise. If the robot is already holding a token, it will throw an <code>AlreadyHoldingSomethingException</code>.</p>
<p>To drop the token, call the <code>R.release</code> method.</p>
<p>Cable-tie flails are not implemented.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Vision</h2>
<p>To help the robot find tokens and navigate, each token has markers stuck to it, as does each wall. The <code>R.see</code> method returns a list of all the markers the robot can see, as <code>Marker</code> objects. The robot can only see markers which it is facing towards.</p>
<p>Each <code>Marker</code> object has the following attributes:</p>
<ul>
<li><code>info</code>: a <code>MarkerInfo</code> object describing the marker itself. Has the following attributes:<ul>
<li><code>code</code>: the numeric code of the marker.</li>
<li><code>marker_type</code>: the type of object the marker is attached to (either <code>MARKER_TOKEN_GOLD</code>, <code>MARKER_TOKEN_SILVER</code> or <code>MARKER_ARENA</code>).</li>
<li><code>offset</code>: offset of the numeric code of the marker from the lowest numbered marker of its type. For example, token number 3 has the code 43, but offset 3.</li>
<li><code>size</code>: the size that the marker would be in the real game, for compatibility with the SR API.</li>
</ul>
</li>
<li><code>centre</code>: the location of the marker in polar coordinates, as a <code>PolarCoord</code> object. Has the following attributes:<ul>
<li><code>length</code>: the distance from the centre of the robot to the object (in metres).</li>
<li><code>rot_y</code>: rotation about the Y axis in degrees.</li>
</ul>
</li>
<li><code>dist</code>: an alias for <code>centre.length</code></li>
<li><code>res</code>: the value of the <code>res</code> parameter of <code>R.see</code>, for compatibility with the SR API.</li>
<li><code>rot_y</code>: an alias for <code>centre.rot_y</code></li>
<li><code>timestamp</code>: the time at which the marker was seen (when <code>R.see</code> was called).</li>
</ul>
<p>For example, the following code lists all of the markers the robot can see:</p>
<div class="fragment"><div class="line">markers = R.see()</div>
<div class="line">print &quot;I can see&quot;, len(markers), &quot;markers:&quot;</div>
<div class="line"> </div>
<div class="line">for m in markers:</div>
<div class="line">    if m.info.marker_type in (MARKER_TOKEN_GOLD, MARKER_TOKEN_SILVER):</div>
<div class="line">        print &quot; - Token {0} is {1} metres away&quot;.format( m.info.offset, m.dist )</div>
<div class="line">    elif m.info.marker_type == MARKER_ARENA:</div>
<div class="line">        print &quot; - Arena marker {0} is {1} metres away&quot;.format( m.info.offset, m.dist )</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
